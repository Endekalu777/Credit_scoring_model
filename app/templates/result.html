<!DOCTYPE html>
<html>
<head>
    <title>RFM Results</title>
</head>
<body>
    <h1>RFM Results</h1>
    
    <h2>Normalized RFM Analysis</h2>
    <table border="1">
        <tr>
            <th>Customer ID</th>
            <th>Recency</th>
            <th>Frequency</th>
            <th>Monetary</th>
            <th>Size</th>
            <th>RFMS Score</th>
        </tr>
        {% for customer in result_data %}
        <tr>
            <td>{{ customer.CustomerId }}</td>
            <td>{{ customer.Recency }}</td>
            <td>{{ customer.Frequency }}</td>
            <td>{{ customer.Monetary }}</td>
            <td>{{ customer.Size }}</td>
            <td>{{ customer.RFMS_Score }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>Raw RFM Values</h2>
    <table border="1">
        <tr>
            <th>Customer ID</th>
            <th>Recency (days)</th>
            <th>Frequency (transactions)</th>
            <th>Monetary (total amount)</th>
            <th>Size (average amount)</th>
        </tr>
        {% for customer in raw_rfms_data %}
        <tr>
            <td>{{ customer.CustomerId }}</td>
            <td>{{ customer.Recency }}</td>
            <td>{{ customer.Frequency }}</td>
            <td>{{ customer.Monetary }}</td>
            <td>{{ customer.Size }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>Predictions</h2>
    <table border="1">
        <tr>
            <th>Customer ID</th>
            <th>Prediction</th>
            <th>Probability</th>
        </tr>
        {% for prediction in prediction_data %}
        <tr>
            <td>{{ prediction.CustomerId }}</td>
            <td>{{ prediction.Prediction }}</td>
            <td>{{ prediction.Probability }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>Individual Transactions</h2>
    <table border="1">
        <tr>
            <th>Customer ID</th>
            <th>Transaction ID</th>
            <th>Amount</th>
            <th>Transaction Start Time</th>
            <th>Product Category</th>
            <th>Currency Code</th>
        </tr>
        {% for transaction in transaction_data %}
        <tr>
            <td>{{ transaction.CustomerId }}</td>
            <td>{{ transaction.TransactionId }}</td>
            <td>{{ transaction.Amount }}</td>
            <td>{{ transaction.TransactionStartTime }}</td>
            <td>{{ transaction.ProductCategory }}</td>
            <td>{{ transaction.CurrencyCode }}</td>
        </tr>
        {% endfor %}
    </table>
    
    <br>
    <a href="/">Submit Another Transaction</a>
</body>
</html>